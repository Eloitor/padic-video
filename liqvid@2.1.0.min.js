/*!
 * MIT License
 *
 * Copyright (c) Yuri Sulyma
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.Liqvid=t(require("react")):e.Liqvid=t(e.React)}(self,(function(e){return(()=>{"use strict";var t={447:e=>{var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,s),r(n)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}f(e,t,s,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&f(e,"error",t,n)}(e,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var i,s,o,u;if(a(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]),void 0===o)o=s[t]=n,++e._eventsCount;else if("function"==typeof o?o=s[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=c(e))>0&&o.length>i&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,u=l,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function d(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):m(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function f(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(s){r.once&&e.removeEventListener(t,i),n(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,s=this._events;if(void 0!==s)i=i&&void 0===s.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var u=c.length,l=m(c,u);for(n=0;n<u;++n)r(l[n],this,t)}return!0},s.prototype.addListener=function(e,t){return u(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return u(this,e,t,!0)},s.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,s,o;if(a(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){o=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,s=Object.keys(n);for(r=0;r<s.length;++r)"removeListener"!==(i=s[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},187:e=>{var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,s),r(n)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}f(e,t,s,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&f(e,"error",t,n)}(e,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var i,s,o,u;if(a(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]),void 0===o)o=s[t]=n,++e._eventsCount;else if("function"==typeof o?o=s[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=c(e))>0&&o.length>i&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,u=l,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function d(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):m(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function f(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(s){r.once&&e.removeEventListener(t,i),n(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,s=this._events;if(void 0!==s)i=i&&void 0===s.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var u=c.length,l=m(c,u);for(n=0;n<u;++n)r(l[n],this,t)}return!0},s.prototype.addListener=function(e,t){return u(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return u(this,e,t,!0)},s.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,s,o;if(a(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){o=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,s=Object.keys(n);for(r=0;r<s.length;++r)"removeListener"!==(i=s[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},888:t=>{t.exports=e}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var s=n[e]={exports:{}};return t[e](s,s.exports,r),s.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{r.r(i),r.d(i,{Audio:()=>Ne,Controls:()=>Ye,IdMap:()=>Re,KeyMap:()=>O,Media:()=>Pe,Playback:()=>De,Player:()=>Me,Script:()=>Be,Utils:()=>h,Video:()=>We,useKeyMap:()=>N,useMarkerUpdate:()=>S,usePlayback:()=>R,usePlayer:()=>A,useScript:()=>j,useTimeUpdate:()=>F});var e={};r.r(e),r.d(e,{awaitMediaCanPlay:()=>p,awaitMediaCanPlayThrough:()=>m});var t={};r.r(t),r.d(t,{between:()=>f,bind:()=>v,constrain:()=>y,range:()=>k,wait:()=>g,waitFor:()=>b});var n={};r.r(n),r.d(n,{formatTime:()=>V,formatTimeMs:()=>U,parseTime:()=>B,timeRegexp:()=>D});var s={};r.r(s),r.d(s,{captureRef:()=>z,recursiveMap:()=>H,useForceUpdate:()=>K});var o={};r.r(o),r.d(o,{dragHelper:()=>X,dragHelperReact:()=>q});var a={};r.r(a),r.d(a,{anyHover:()=>W,attachClickHandler:()=>$,onClick:()=>Y});var c={};r.r(c),r.d(c,{animate:()=>Ve,replay:()=>Ue});var u={};r.r(u),r.d(u,{during:()=>ze,from:()=>Ke,showIf:()=>Ie});var l={};r.r(l),r.d(l,{concat:()=>He,length:()=>Xe});var h={};r.r(h),r.d(h,{animation:()=>c,authoring:()=>u,interactivity:()=>o,media:()=>e,misc:()=>t,mobile:()=>a,react:()=>s,replayData:()=>l,time:()=>n});var d=r(888);function p(e){return new Promise((t=>{if(e.readyState===e.HAVE_FUTURE_DATA)return t();e.addEventListener("canplay",(()=>t()))}))}function m(e){return new Promise((t=>{if(e.readyState===e.HAVE_ENOUGH_DATA)return t();e.addEventListener("canplaythrough",(()=>t()))}))}function f(e,t,n){return e<=t&&t<n}function v(e,t){for(const n of t)e[n]=e[n].bind(e)}function y(e,t,n){return Math.min(n,Math.max(e,t))}function g(e){return new Promise((t=>{setTimeout(t,e)}))}function b(e,t=10){return new Promise((n=>{const r=()=>{e()?n():setTimeout(r,t)};r()}))}function k(e,t){return void 0===t?k(0,e):new Array(t-e).fill(null).map(((t,n)=>e+n))}var w=r(187);const E=["AltGraph","CapsLock","FnLock","NumLock","ScrollLock","SymbolLock","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","PageDown","PageUp","CrSel","EraseEof","ExSel","ContextMenu","ZoomIn","ZoomOut","BrightnessDown","BrightnessUp","LogOff","PowerOff","PrintScreen","WakeUp","AllCandidates","CodeInput","FinalMode","GroupFirst","GroupLast","GroupNext","GroupPrevious","ModeChange","NextCandidate","NonConvert","PreviousCandidate","SingleCandidate","HangulMode","HanjaMode","JunjaMode","HiraganaKatakana","KanaMode","KanjiMode","ZenkakuHanaku","AppSwitch","CameraFocus","EndCall","GoBack","GoHome","HeadsetHook","LastNumberRedial","MannerMode","VoiceDial","ChannelDown","ChannelUp","MediaFastForward","MediaPause","MediaPlay","MediaPlayPause","MediaRecord","MediaRewind","MediaStop","MediaTrackNext","MediaTrackPrevious","AudioBalanceLeft","AudioBalanceRight","AudioBassDown","AudioBassBoostDown","AudioBassBoostToggle","AudioBassBoostUp","AudioBassUp","AudioFaderFront","AudioFaderRear","AudioSurroundModeNext","AudioTrebleDown","AudioTrebleUp","AudioVolumeDown","AudioVolumeMute","AudioVolumeUp","MicrophoneToggle","MicrophoneVolumeDown","MicrophoneVolumeMute","MicrophoneVolumeUp","TV","TVAntennaCable","TVAudioDescription","TVAudioDescriptionMixDown","TVAudioDescriptionMixUp","TVContentsMenu","TVDataService","TVInput","TVMediaContext","TVNetwork","TVNumberEntry","TVPower","TVRadioService","TVSatellite","TVSatelliteBS","TVSatelliteCS","TVSatelliteToggle","TVTerrestrialAnalog","TVTerrestrialDigital","TVTimer","AVRInput","AVRPower","ClosedCaptionToggle","DisplaySwap","DVR","GuideNextDay","GuidePreviousDay","InstantReplay","ListProgram","LiveContent","MediaApps","MediaAudioTrack","MediaLast","MediaSkipBackward","MediaSkipForward","MediaStepBackward","MediaStepForward","MediaTopMenu","NavigateIn","NavigateNext","NavigateOut","NavigatePrevious","NextFavoriteChannel","NextUserProfile","OnDemand","PinPDown","PinPMove","PinPToggle","PinPUp","PlaySpeedDown","PlaySpeedReset","PlaySpeedUp","RandomToggle","RcLowBattery","RecordSpeedNext","RfBypass","ScanChannelsToggle","ScreenModeNext","SplitScreenToggle","STBInput","STBPower","VideoModeNext","ZoomToggle","SpeechCorrectionList","SpeechInputToggle","SpellCheck","MailForward","MailReply","MailSend","LaunchCalculator","LaunchCalendar","LaunchContacts","LaunchMail","LaunchMediaPlayer","LaunchMusicPlayer","LaunchMyComputer","LaunchPhone","LaunchScreenSaver","LaunchSpreadsheet","LaunchWebBrowser","LaunchWebCam","LaunchWordProcessor","BrowserBack","BrowserFavorites","BrowserForward","BrowserHome","BrowserRefresh","BrowserSearch","BrowserStop"];var _,C=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},L=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const T={Control:"Ctrl",Alt:"Alt",Shift:"Shift",Meta:"Meta"},M={};for(const r of E)M[r.toLowerCase()]=r;const x=Object.keys(T).map((e=>T[e])),P=["Backspace","Enter","Space","Tab"];class O{constructor(){_.set(this,void 0),C(this,_,{},"f")}static identify(e){const t=[];for(const n in T)e.getModifierState(n)&&t.push(T[n]);return e.key in T||(e.code.startsWith("Digit")?t.push(e.code.slice(5)):e.code.startsWith("Key")?t.push(e.code.slice(3)):P.includes(e.code)?t.push(e.code):t.push(e.key)),t.join("+")}static normalize(e){return e.split("+").map((e=>{const t=e.toLowerCase();return""===e?"":M[t]?M[t]:e[0].toUpperCase()+t.slice(1)})).sort(((e,t)=>x.includes(e)?x.includes(t)?x.indexOf(e)-x.indexOf(t):-1:x.includes(t)?1:function(e,t){if(e<t)return-1;if(e===t)return 0;return 1}(e,t))).join("+")}bind(e,t){if(e.indexOf(",")>-1)for(const n of e.split(","))this.bind(n,t);else e=O.normalize(e),L(this,_,"f").hasOwnProperty(e)||(L(this,_,"f")[e]=[]),L(this,_,"f")[e].push(t)}unbind(e,t){var n;if(e.indexOf(",")>-1){for(const n of e.split(","))this.unbind(n,t);return}if(e=O.normalize(e),!L(this,_,"f").hasOwnProperty(e))throw new Error(`${e} is not bound`);const r=L(this,_,"f")[e].indexOf(t);if(r<0)throw new Error(`${e} is not bound to ${null!==(n=t.name)&&void 0!==n?n:"callback"}`);L(this,_,"f")[e].splice(r,1),0===L(this,_,"f")[e].length&&delete L(this,_,"f")[e]}getKeys(){return Object.keys(L(this,_,"f"))}getHandlers(e){return L(this,_,"f").hasOwnProperty(e)?L(this,_,"f")[e].slice():[]}handle(e){let t=!1;const n=O.identify(e);if(L(this,_,"f")[n]||L(this,_,"f")["*"]){if(t&&(e.preventDefault(),t=!0),L(this,_,"f")[n])for(const t of L(this,_,"f")[n])t(e);if(L(this,_,"f")["*"])for(const t of L(this,_,"f")["*"])t(e)}}}function S(e,t){const n=j();(0,d.useEffect)((()=>(n.on("markerupdate",e),()=>{n.off("markerupdate",e)})),t)}function N(){return A().keymap}function R(){return A().playback}function j(){return A().script}function A(){return(0,d.useContext)(Me.Context)}function F(e,t){const n=R();(0,d.useEffect)((()=>(n.on("seek",e),n.on("timeupdate",e),()=>{n.off("seek",e),n.off("timeupdate",e)})),t)}_=new WeakMap;const D=/^(?:(?:(\d+):)?(\d+):)?(\d+)(?:\.(\d+))?$/;function B(e){const[t,n,r,i]=e.match(D).slice(1).map((e=>e||"0")),[s,o,a,c]=[t,n,r,i.padEnd(3,"0")].map((e=>parseInt(e,10)));return c+1e3*(a+60*(o+60*s))}function V(e){if(e<0)return"-"+V(-e);return`${Math.floor(e/60/1e3)}:${Math.floor(e/1e3%60).toString().padStart(2,"0")}`}function U(e){if(e<0)return"-"+U(-e);const t=Math.floor(e%1e3);return`${V(e)}.${t}`}function I(e){const t=A(),{playback:n}=t,{cols:r,rows:i,frequency:s,path:o,progress:a,show:c,title:u,height:l,width:h}=e,p=r*i;(0,d.useEffect)((()=>{const e=Math.floor(n.duration/s/1e3),r=Math.floor(e/p);t.hub.on("canplay",(()=>{for(let e=0;e<=r;++e){(new Image).src=o.replace("%s",e.toString())}}))}),[]);const m=a*n.duration/1e3,f=Math.floor(m/s),v=Math.floor(f/p),y=f%p,g=Math.floor(y/i),b=y%i,k=o.replace("%s",v.toString());return d.createElement("div",{className:"rp-controls-thumbnail",style:{display:c?"block":"none",left:`calc(${100*a}%)`}},u&&d.createElement("span",{className:"rp-thumbnail-title"},u),d.createElement("div",{className:"rp-thumbnail-box"},d.createElement("img",{src:k,style:{left:`-${b*h}px`,top:`-${g*l}px`}}),d.createElement("span",{className:"rp-thumbnail-time"},V(1e3*m))))}const z=(e,t)=>n=>{null!==n&&e(n),null!==t&&("function"==typeof t?t(n):"object"==typeof t&&(t.current=n))};function K(){return d.useReducer((e=>!e),!1)[1]}function H(e,t){return d.Children.map(e,(e=>d.isValidElement(e)?("children"in e.props&&(e=d.cloneElement(e,{children:H(e.props.children,t)})),t(e)):e))}function X(e,t=(()=>{}),n=(()=>{})){return r=>{if(r instanceof MouseEvent||function(e){return"nativeEvent"in e&&e.nativeEvent instanceof MouseEvent}(r)){if(0!==r.button)return;let i=r.clientX,s=r.clientY;const o=e=>{const t=e.clientX-i,r=e.clientY-s;return document.body.removeEventListener("mousemove",a),window.removeEventListener("mouseup",o),n(e,{x:e.clientX,y:e.clientY,dx:t,dy:r})},a=t=>{const n=t.clientX-i,r=t.clientY-s;return i=t.clientX,s=t.clientY,e(t,{x:t.clientX,y:t.clientY,dx:n,dy:r})};return document.body.addEventListener("mousemove",a,{passive:!1}),window.addEventListener("mouseup",o,{passive:!1}),t(r,{x:i,y:s},o,a)}{r.preventDefault();const i=r.changedTouches,s=i[0].identifier;let o=i[0].clientX,a=i[0].clientY;const c=e=>{e.preventDefault();for(const t of Array.from(e.changedTouches)){if(t.identifier!==s)continue;const r=t.clientX-o,i=t.clientY-a;return window.removeEventListener("touchend",c,{capture:!1,passive:!1}),window.removeEventListener("touchcancel",c,{capture:!1,passive:!1}),window.removeEventListener("touchmove",u,{capture:!1,passive:!1}),n(e,{x:t.clientX,y:t.clientY,dx:r,dy:i})}},u=t=>{t.preventDefault();for(const n of Array.from(t.changedTouches)){if(n.identifier!==s)continue;const r=n.clientX-o,i=n.clientY-a;return o=n.clientX,a=n.clientY,e(t,{x:n.clientX,y:n.clientY,dx:r,dy:i})}};return window.addEventListener("touchend",c,{capture:!1,passive:!1}),window.addEventListener("touchcancel",c,{capture:!1,passive:!1}),window.addEventListener("touchmove",u,{capture:!1,passive:!1}),t(r,{x:o,y:a},c,u)}}}function q(e,t,n,r){const i=X(e,t,n);if(r){const e=z((e=>e.addEventListener("touchstart",i,{passive:!1})),r);return{onMouseDown:i,onMouseUp:Me.preventCanvasClick,ref:e}}return{onMouseDown:i,onMouseUp:Me.preventCanvasClick,onTouchStart:i}}const W=window.matchMedia("(any-hover: hover)").matches,Y=(e,t)=>{if(W)return{onClick:e};{let n,r;const i=e=>{"number"!=typeof n&&(r=e.currentTarget,n=e.changedTouches[0].identifier)},s=t=>{if("number"==typeof n)for(const i of Array.from(t.changedTouches))if(i.identifier===n){r.contains(document.elementFromPoint(i.clientX,i.clientY))&&e(t),n=void 0;break}};return{ref:z((e=>{e.addEventListener("touchstart",i,{passive:!1}),e.addEventListener("touchend",s,{passive:!1})}),t)}}},$=(e,t)=>{if(W)return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)};let n;const r=e=>{"number"!=typeof n&&(n=e.changedTouches[0].identifier)},i=r=>{if("number"==typeof n)for(const i of Array.from(r.changedTouches))i.identifier===n&&(e.contains(document.elementFromPoint(i.clientX,i.clientY))&&t(r),n=void 0)};return e.addEventListener("touchstart",r),e.addEventListener("touchend",i),()=>{e.removeEventListener("touchstart",r),e.removeEventListener("touchend",i)}};function G(e){const t=N(),n=R(),r=j(),[i,s]=(0,d.useState)({scrubber:n.currentTime/n.duration,thumb:n.currentTime/n.duration}),[o,a]=(0,d.useState)(!1),c=(0,d.useRef)(),u=(0,d.useRef)(!1);u.current||(n.on("seek",(()=>{if(n.seeking)return;const e=n.currentTime/n.duration;s({scrubber:e,thumb:e})})),n.on("seeked",(()=>{const e=n.currentTime/n.duration;s((t=>({scrubber:e,thumb:t.thumb})))})),n.on("timeupdate",(()=>{const e=n.currentTime/n.duration;s((t=>({scrubber:e,thumb:t.thumb})))})),t.bind("ArrowLeft",(()=>n.seek(n.currentTime-5e3))),t.bind("ArrowRight",(()=>n.seek(n.currentTime+5e3))),t.bind("J",(()=>n.seek(n.currentTime-1e4))),t.bind("L",(()=>n.seek(n.currentTime+1e4))),t.bind("W",(()=>r.back())),t.bind("E",(()=>r.forward())),t.bind("0,1,2,3,4,5,6,7,8,9",(e=>{const t=parseInt(e.key,10);isNaN(t)||n.seek(n.duration*t/10)})),u.current=!0);const l=(0,d.useMemo)((()=>W?{onMouseDown:X(((e,{x:t})=>{const r=c.current.getBoundingClientRect(),i=y(0,(t-r.left)/r.width,1);s({scrubber:i,thumb:i}),n.seek(i*n.duration)}),(e=>{n.seeking=!0;const t=c.current.getBoundingClientRect(),r=y(0,(e.clientX-t.left)/t.width,1);s({scrubber:r,thumb:r}),n.seek(r*n.duration)}),(()=>n.seeking=!1))}:{}),[]),h=(0,d.useMemo)((()=>{const e={};W&&Object.assign(e,{onMouseOver:()=>a(!0),onMouseMove:e=>{const t=c.current.getBoundingClientRect(),n=y(0,(e.clientX-t.left)/t.width,1);s((e=>({scrubber:e.scrubber,thumb:n})))},onMouseOut:()=>a(!1)});const t=X(((e,{x:t})=>{const n=c.current.getBoundingClientRect(),r=y(0,(t-n.left)/n.width,1);s({scrubber:r,thumb:r})}),(e=>{e.preventDefault(),e.stopPropagation(),n.seeking=!0,a(!0)}),((e,{x:t})=>{e.preventDefault();const r=c.current.getBoundingClientRect(),i=y(0,(t-r.left)/r.width,1);a(!1),n.seeking=!1,n.seek(i*n.duration)}));return e.ref=z((e=>{e.addEventListener("touchstart",t,{passive:!1})})),e}),[]),p=(0,d.useMemo)((()=>{const e=X(((e,{x:t})=>{const n=c.current.getBoundingClientRect(),r=y(0,(t-n.left)/n.width,1);s({scrubber:r,thumb:r})}),(e=>{e.preventDefault(),e.stopPropagation(),n.seeking=!0,a(!0)}),((e,{x:t})=>{e.preventDefault();const r=c.current.getBoundingClientRect(),i=y(0,(t-r.left)/r.width,1);a(!1),n.seeking=!1,n.seek(i*n.duration)}));return{ref:z((t=>{t.addEventListener("touchstart",e,{passive:!1})}))}}),[]),m=e.thumbs&&e.thumbs.highlights||[],v=m.find((e=>f(e.time/n.duration,i.thumb,e.time/n.duration+.01))),g=v?v.title:null;return d.createElement("div",Object.assign({className:"rp-controls-scrub",ref:c},l),e.thumbs&&d.createElement(I,Object.assign({},e.thumbs,{progress:i.thumb,show:o,title:g})),d.createElement("div",Object.assign({className:"rp-controls-scrub-wrap"},h),d.createElement("svg",{className:"rp-controls-scrub-progress",preserveAspectRatio:"none",viewBox:"0 0 100 10"},d.createElement("rect",{className:"rp-progress-elapsed",x:"0",y:"0",height:"10",width:100*i.scrubber}),d.createElement("rect",{className:"rp-progress-remaining",x:100*i.scrubber,y:"0",height:"10",width:100*(1-i.scrubber)}),m.map((({time:e})=>d.createElement("rect",{key:e,className:["rp-thumb-highlight"].concat(e<=n.currentTime?"past":[]).join(" "),x:e/n.duration*100,y:"0",width:"1",height:"10"})))),d.createElement("svg",Object.assign({className:"rp-scrubber",style:{left:`calc(${100*i.scrubber}% - 6px)`},viewBox:"0 0 100 100"},p),d.createElement("circle",{cx:"50",cy:"50",r:"50",stroke:"none"}))))}const{useCallback:Z,useEffect:J,useRef:Q,useState:ee}=d;function te(e){const t=N(),n=R(),[r,i]=ee(!0),s=Q(0),o=Z((()=>{n.paused||(void 0!==s.current&&clearTimeout(s.current),s.current=window.setTimeout((()=>i(!1)),3e3),i(!0))}),[]);J((()=>{t.bind("*",o),document.body.addEventListener("touchstart",o),document.body.addEventListener("mousemove",o),n.on("play",o),n.on("pause",(()=>{clearTimeout(s.current),i(!0)})),n.on("stop",(()=>{clearTimeout(s.current),i(!0)})),document.body.addEventListener("mouseleave",(()=>{n.paused||i(!1)}))}),[]);const a=["rp-controls"];return r||a.push("hidden"),d.createElement("div",{className:a.join(" ")},d.createElement(G,{thumbs:e.thumbs}),d.createElement("div",{className:"rp-controls-buttons"},e.controls))}function ne(){const e=A(),t=N(),n=(K(),(0,d.useCallback)((t=>{e.canvas.parentElement.classList.toggle("rp-captions"),t.currentTarget instanceof HTMLButtonElement&&t.currentTarget.blur()}),[]));(0,d.useEffect)((()=>(t.bind("C",n),()=>{t.unbind("C",n)})),[]);const r=(0,d.useMemo)((()=>Y(n)),[]);return d.createElement("button",Object.assign({className:"rp-controls-captions"},r),d.createElement("svg",{viewBox:"0 0 36 36"},d.createElement("path",{d:"M 6.00014 8.00002 C 4.33815 8.00002 2.99981 8.8919 2.99981 9.99989 L 2.99981 25.9999 C 2.99981 27.1079 4.33815 27.9998 6.00014 27.9998 L 30.0002 27.9998 C 31.6622 27.9998 33 27.1079 33 25.9999 L 33 9.99989 C 33 8.8919 31.6622 8.00002 30.0002 8.00002 L 6.00014 8.00002 Z M 14.4032 14.0389 C 15.33 14.0389 16.0827 14.3128 16.6615 14.8606 C 17.006 15.1844 17.2644 15.6495 17.4366 16.2558 L 15.9225 16.6176 C 15.833 16.2248 15.6452 15.9148 15.3592 15.6874 C 15.0768 15.46 14.7322 15.3463 14.3257 15.3463 C 13.7642 15.3463 13.3077 15.5479 12.9563 15.9509 C 12.6083 16.354 12.4344 17.0069 12.4344 17.9095 C 12.4344 18.8672 12.6066 19.5493 12.9511 19.9559 C 13.2956 20.3624 13.7435 20.5656 14.2947 20.5656 C 14.7012 20.5656 15.0509 20.4365 15.3437 20.1781 C 15.6366 19.9197 15.8467 19.5132 15.9742 18.9585 L 17.4573 19.4288 C 17.2299 20.2556 16.851 20.8705 16.3204 21.2736 C 15.7933 21.6732 15.1233 21.8731 14.3102 21.8731 C 13.3043 21.8731 12.4774 21.5303 11.8298 20.8447 C 11.1821 20.1557 10.8582 19.2152 10.8582 18.0232 C 10.8582 16.7623 11.1838 15.7839 11.8349 15.0879 C 12.486 14.3886 13.3422 14.0389 14.4032 14.0389 Z M 22.0462 14.0389 C 22.9729 14.0389 23.7257 14.3128 24.3044 14.8606 C 24.6489 15.1844 24.9073 15.6495 25.0796 16.2558 L 23.5655 16.6176 C 23.4759 16.2248 23.2881 15.9148 23.0022 15.6874 C 22.7197 15.46 22.3752 15.3463 21.9687 15.3463 C 21.4071 15.3463 20.9506 15.5479 20.5992 15.9509 C 20.2513 16.354 20.0773 17.0069 20.0773 17.9095 C 20.0773 18.8672 20.2496 19.5493 20.5941 19.9559 C 20.9386 20.3624 21.3864 20.5656 21.9377 20.5656 C 22.3442 20.5656 22.6938 20.4365 22.9867 20.1781 C 23.2795 19.9197 23.4897 19.5132 23.6171 18.9585 L 25.1002 19.4288 C 24.8729 20.2556 24.4939 20.8705 23.9634 21.2736 C 23.4363 21.6732 22.7662 21.8731 21.9532 21.8731 C 20.9472 21.8731 20.1204 21.5303 19.4727 20.8447 C 18.825 20.1557 18.5012 19.2152 18.5012 18.0232 C 18.5012 16.7623 18.8267 15.7839 19.4779 15.0879 C 20.129 14.3886 20.9851 14.0389 22.0462 14.0389 Z"})))}const re=e=>e,ie=["fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled"].map((e=>document[e])).concat(!1).find((e=>void 0!==e)),se=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"].map((e=>document.body[e])).concat((()=>{})).find(re).bind(document.body),oe=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"].map((e=>document[e])).concat((async()=>{})).find(re).bind(document);let ae=!1;const ce=[],ue=ie?se:()=>{if(window.parent.postMessage({type:"fake-fullscreen",value:!0},location.origin),!ae){ae=!0;for(const e of ce)e()}},le=ie?oe:()=>{if(window.parent.postMessage({type:"fake-fullscreen",value:!1},location.origin),ae){ae=!1;for(const e of ce)e()}},he=ie?()=>["fullscreen","webkitIsFullScreen","mozFullScreen"].map((e=>document[e])).find((e=>void 0!==e)):()=>ae,de=ie?function(e){for(const t of["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"])document.addEventListener(t,e)}:e=>{ce.push(e)};function pe(){const e=N(),t=K(),n=(0,d.useCallback)((()=>he()?le():ue()),[]);(0,d.useEffect)((()=>(de(t),e.bind("F",n),()=>{e.unbind("F",n)})),[]);const r=(0,d.useMemo)((()=>Y(n)),[]);return d.createElement("svg",Object.assign({className:"rp-controls-fullscreen"},r,{viewBox:"0 0 36 36"}),he()?d.createElement(d.Fragment,null,d.createElement("path",{fill:"white",d:"M 14 14 h -4 v 2 h 6 v -6 h -2 v 4 z"}),d.createElement("path",{fill:"white",d:"M 22 14 v -4 h -2 v 6 h 6 v -2 h -4 z"}),d.createElement("path",{fill:"white",d:"M 20 26 h 2 v -4 h 4 v -2 h -6 v 6 z"}),d.createElement("path",{fill:"white",d:"M 10 22 h 4 v 4 h 2 v -6 h -6 v 2 z"})):d.createElement(d.Fragment,null,d.createElement("path",{fill:"white",d:"M 10 16 h 2 v -4 h 4 v -2 h -6 v 6 z"}),d.createElement("path",{fill:"white",d:"M 20 10 v 2 h 4 v 4 h 2 v -6 h -6 z"}),d.createElement("path",{fill:"white",d:"M 24 24 h -4 v 2 h 6 v -6 h -2 v 4 z"}),d.createElement("path",{fill:"white",d:"M 12 20 h -2 v 6 h 6 v -2 h -4 v -4 z"})))}function me(){const e=N(),t=R(),n=K();(0,d.useEffect)((()=>{const r=["pause","play","seeking","seeked","stop"];for(const e of r)t.on(e,n);const i=()=>t[t.paused?"play":"pause"]();return e.bind("K",i),e.bind("Space",i),()=>{for(const e of r)t.off(e,n);e.unbind("K",i),e.unbind("Space",i)}}),[]);const r=(0,d.useRef)(),i=(0,d.useMemo)((()=>Y((()=>t.paused?t.play():t.pause()),r)),[]);return d.createElement("svg",Object.assign({className:"rp-controls-playpause",viewBox:"0 0 36 36"},i),t.paused||t.seeking?d.createElement("path",{d:"M 12,26 18.5,22 18.5,14 12,10 z M 18.5,22 25,18 25,18 18.5,14 z",fill:"white"}):d.createElement("path",{d:"M 12 26 h 4 v -16 h -4 z M 21 26 h 4 v -16 h -4 z",fill:"white"}))}const fe=[.25,.5,.75,1,1.25,1.5,2];var ve;function ye(){const e=A(),{keymap:t,playback:n}=e,[r,i]=(0,d.useState)(ve.None),[s,o]=(0,d.useState)(n.playbackRate),a=K();(0,d.useEffect)((()=>{n.on("ratechange",(()=>o(n.playbackRate))),e.hub.on("canvasClick",(()=>i(ve.None))),t.bind("Shift+<",(()=>n.playbackRate=fe[Math.max(0,fe.indexOf(n.playbackRate)-1)])),t.bind("Shift+>",(()=>n.playbackRate=fe[Math.min(fe.length-1,fe.indexOf(n.playbackRate)+1)]))}),[]);const c=(0,d.useMemo)((()=>{const e={};for(const t of fe)e[t]=Y((()=>{n.playbackRate=t,i(ve.Main)}));return e}),[]),u=(0,d.useMemo)((()=>Y((()=>i((e=>e===ve.None?ve.Main:ve.None))))),[]),l=((0,d.useMemo)((()=>Y((()=>{document.body.classList.toggle("rp-captions"),a()}))),[]),Y((()=>i(ve.Main)))),h=Y((()=>i(ve.Speed))),p=Y((()=>i(ve.Captions))),m=(0,d.useMemo)((()=>({display:r===ve.Main?"block":"none"})),[r===ve.Main]),f=(0,d.useMemo)((()=>({display:r===ve.Speed?"block":"none"})),[r===ve.Speed]),v=(0,d.useMemo)((()=>({display:r===ve.Captions?"block":"none"})),[r===ve.Captions]),y=d.useRef();d.useEffect((()=>{y.current=function(e){for(const t of Array.from(e.querySelectorAll("audio")))if(be(t).length>0)return t}(e.canvas),y.current&&(g.current=be(y.current))}),[]);const g=d.useRef([]),b=g.current.find((e=>"showing"===e.mode)),k=d.useMemo((()=>Y((e=>{let t=-1,n=e.currentTarget;for(;n=n.previousElementSibling;)t++;for(let r=0;r<g.current.length;++r)r!==t&&(g.current[r].mode="disabled",g.current[r].mode="hidden",g.current[r].mode="disabled");t>=0&&(g.current[t].mode="showing"),a()}))),[]);return d.createElement("div",{className:"rp-controls-settings"},d.createElement("div",{className:"rp-settings-speed-dialog",style:f},d.createElement("span",Object.assign({className:"rp-dialog-subtitle"},l),"< Speed"),d.createElement("ul",null,fe.map((e=>d.createElement("li",Object.assign({className:e===s?"selected":"",key:e},c[e]),1===e?"Normal":e.toString()))))),d.createElement("div",{className:"rp-settings-captions-dialog",style:v},d.createElement("span",Object.assign({className:"rp-dialog-subtitle"},l),"< Captions"),d.createElement("ul",null,d.createElement("li",Object.assign({className:b?"":"selected"},k),"Off"),g.current.map((e=>d.createElement("li",Object.assign({className:e===b?"selected":"",key:e.id||e.label||e.language},k),ge(e)))))),d.createElement("div",{className:"rp-settings-dialog",style:m},d.createElement("table",null,d.createElement("tbody",null,d.createElement("tr",Object.assign({},h),d.createElement("th",{scope:"row"},"Speed"),d.createElement("td",null,1===s?"Normal":s," >")),g.current.length>0&&d.createElement("tr",Object.assign({},p),d.createElement("th",{scope:"row"},"Subtitles (",g.current.length,")"),d.createElement("td",null,ge(b)," >"))))),d.createElement("svg",Object.assign({},u,{viewBox:"0 0 48 48"}),d.createElement("path",{fill:"#FFF",d:"m24.04 0.14285c-1.376 0-2.7263 0.12375-4.0386 0.34741l-0.64 6.7853c-1.3572 0.37831-2.6417 0.90728-3.8432 1.585l-5.244-4.3317c-2.2152 1.5679-4.1541 3.4955-5.7217 5.7101l4.3426 5.2437c-0.67695 1.2001-1.2177 2.4878-1.5959 3.8432l-6.7745 0.64053c-0.22379 1.3127-0.34741 2.6622-0.34741 4.0386 0 1.3788 0.12285 2.7238 0.34741 4.0386l6.7745 0.64056c0.37825 1.3554 0.91896 2.6431 1.5959 3.8432l-4.3317 5.2437c1.5648 2.2089 3.4908 4.1457 5.6997 5.7105l5.2545-4.3426c1.2023 0.67835 2.485 1.2174 3.8432 1.5959l0.64053 6.7853c1.3123 0.22368 2.6626 0.33658 4.0386 0.33658s2.7155-0.11289 4.0278-0.33658l0.64053-6.7853c1.3582-0.37847 2.6409-0.91755 3.8432-1.5959l5.2545 4.3426c2.2088-1.5649 4.1348-3.5017 5.6997-5.7105l-4.3317-5.2437c0.67695-1.2001 1.2177-2.4878 1.5959-3.8432l6.7744-0.64056c0.22456-1.3148 0.34741-2.6598 0.34741-4.0386 0-1.3765-0.12361-2.726-0.34741-4.0386l-6.7744-0.64053c-0.37825-1.3554-0.91896-2.6431-1.5959-3.8432l4.3426-5.2437c-1.568-2.2146-3.507-4.1422-5.722-5.7101l-5.2437 4.3317c-1.2015-0.67776-2.486-1.2067-3.8432-1.585l-0.641-6.7853c-1.3123-0.22366-2.6518-0.34741-4.0278-0.34741zm0 14.776c5.0178 0 9.076 4.0691 9.076 9.0869s-4.0582 9.0869-9.076 9.0869-9.0869-4.0691-9.0869-9.0869 4.0691-9.0869 9.0869-9.0869z"})))}function ge(e){return void 0===e?"Off":e.label||e.language}function be(e){return Array.from(e.textTracks).filter((e=>["captions","subtitles"].includes(e.kind)))}function ke(){const e=R(),t=K();return d.useEffect((()=>(e.on("durationchange",t),e.on("seek",t),e.on("timeupdate",t),()=>{e.off("durationchange",t),e.off("seek",t),e.off("timeupdate",t)})),[]),d.createElement("span",{className:"rp-controls-time"},d.createElement("span",{className:"rp-current-time"},V(e.currentTime)),d.createElement("span",{className:"rp-time-separator"},"/"),d.createElement("span",{className:"rp-total-time"},V(e.duration)))}!function(e){e[e.None=0]="None",e[e.Main=1]="Main",e[e.Speed=2]="Speed",e[e.Captions=3]="Captions"}(ve||(ve={}));const{useCallback:we,useEffect:Ee,useMemo:_e}=d;function Ce(){const e=N(),t=R(),n=K();Ee((()=>{t.on("volumechange",n),e.bind("ArrowUp",(()=>t.volume=t.volume+.05)),e.bind("ArrowDown",(()=>t.volume=t.volume-.05)),e.bind("M",(()=>t.muted=!t.muted))}),[]);const r=we((e=>{t.volume=parseFloat(e.target.value)/100}),[]),i=_e((()=>Y((()=>t.muted=!t.muted))),[]);return d.createElement("div",{className:"rp-controls-volume"},d.createElement("svg",Object.assign({},i,{viewBox:"0 0 100 100"}),d.createElement("path",{d:"M 10 35 h 20 l 25 -20 v 65 l -25 -20 h -20 z",fill:"white",stroke:"none"}),t.muted?d.createElement("path",{d:"M 63 55 l 20 20 m 0 -20 l -20 20",stroke:"white",strokeWidth:"7"}):d.createElement("g",null,t.volume>0&&d.createElement("path",{d:"M 62 32.5 a 1,1 0 0,1 0,30",fill:"white",stroke:"none"}),t.volume>=.5&&d.createElement("path",{d:"M 62 15 a 1,1 0 0,1 0,65 v -10 a 10,10 0 0,0 0,-45 v -10 z",fill:"white",stroke:"none"}))),d.createElement("input",{min:"0",max:"100",onChange:r,type:"range",value:t.muted?0:100*t.volume}))}const Le=Symbol(),Te=Symbol();class Me extends d.PureComponent{constructor(e){super(e),this.hub=new w.EventEmitter,this.__canPlayTasks=[],this.__canPlayThroughTasks=[],this.keymap=new O,this.captureKeys=!0,e.script?(this.script=e.script,this.playback=this.script.playback):this.playback=e.playback,this.buffers=new Map,v(this,["onMouseUp","suspendKeyCapture","resumeKeyCapture","updateTree","reparseTree"])}componentDidMount(){document.body.addEventListener("keydown",(e=>{this.captureKeys&&document.activeElement===document.body&&this.keymap.handle(e)})),document.addEventListener("touchmove",(e=>{e[Le]||e.preventDefault()}),{passive:!1}),document.addEventListener("touchforcechange",(e=>e.preventDefault()),{passive:!1}),this.canPlay=Promise.all(this.__canPlayTasks),this.canPlay.then((()=>{this.hub.emit("canplay")})),this.canPlayThrough=Promise.all(this.__canPlayThroughTasks),this.canPlayThrough.then((()=>this.hub.emit("canplaythrough"))),this.script&&(this.dag=xe(this.canvas,this.script.markerNumberOf),this.script.on("markerupdate",this.updateTree),this.updateTree())}updateTree(){const{script:e}=this;function t(e){e.element.style.opacity="0",e.element.style["pointer-events"]="none",e.element.setAttribute("aria-hidden","true")}function n(e){return e.element.style.removeProperty("opacity"),e.element.style.removeProperty("pointer-events"),e.element.removeAttribute("aria-hidden"),e.children.forEach(r)}function r(i){return void 0===i.first?void 0!==i.during?e.markerName.startsWith(i.during)?n(i):t(i):i.children.forEach(r):i.first<=e.markerIndex&&(!i.last||e.markerIndex<i.last)?n(i):void t(i)}r(this.dag)}canvasClick(){this.hub.listeners("canvasClick").every((e=>{var t;return null===(t=e())||void 0===t||t}))&&(this.playback.paused?this.playback.play():this.playback.pause()),this.hub.emit("canvasClick")}onMouseUp(e){["a","area","button","input","option","select","textarea","video"].includes(e.target.nodeName.toLowerCase())||e.nativeEvent[Te]||this.canvasClick()}static allowScroll(e){("nativeEvent"in e?e.nativeEvent:e)[Le]=!0}static preventCanvasClick(e){("nativeEvent"in e?e.nativeEvent:e)[Te]=!0}suspendKeyCapture(){this.captureKeys=!1}resumeKeyCapture(){this.captureKeys=!0}ready(){console.info(".ready() is a noop in v2.1")}reparseTree(e){const[t,n]=function e(t,n){var r;if(!n.element.contains(t))return null;for(let i=0;i<n.children.length;++i)if(n.children[i].element.contains(t))return null!==(r=e(t,n.children[i]))&&void 0!==r?r:[n,i]}(e,this.dag);if(!t)throw new Error("Could not find node in tree");t.children[n].children=xe(t.children[n].element,this.script.markerNumberOf).children,this.updateTree()}registerBuffer(e){this.buffers.set(e,[])}unregisterBuffer(e){this.buffers.delete(e)}updateBuffer(e,t){this.buffers.set(e,t),this.playback.emit("bufferupdate")}obstruct(e,t){"canplay"===e?this.__canPlayTasks.push(t):this.__canPlayThroughTasks.push(t)}render(){const e={style:this.props.style},t=W?{onMouseUp:this.onMouseUp}:{};return d.createElement(Me.Context.Provider,{value:this},d.createElement("div",Object.assign({className:["ractive-player"].join(" ")},e),d.createElement("div",Object.assign({className:"rp-canvas"},t,{ref:e=>this.canvas=e}),this.props.children),d.createElement(ne,null),d.createElement(te,{controls:this.props.controls,thumbs:this.props.thumbs})))}}function xe(e,t){const n=Array.from(e.querySelectorAll("*[data-from-first], *[data-during]")),r={children:[],element:e},i=[r];for(const s of n){let e,n,r;s.dataset.fromFirst?(e=s.dataset.fromFirst,n=s.dataset.fromLast):s.dataset.during&&(r=s.dataset.during),s.style.opacity="0",s.style.pointerEvents="none";const o={children:[],element:s};r&&(o.during=r),e&&(o.first=t(e)),n&&(o.last=t(n));let a=i[i.length-1];for(;!a.element.contains(s);)i.pop(),a=i[i.length-1];a.children.push(o),i.push(o)}return r}Me.Context=d.createContext(null),Me.defaultControlsLeft=d.createElement(d.Fragment,null,d.createElement(me,null),d.createElement(Ce,null),d.createElement(ke,null)),Me.defaultControlsRight=d.createElement(d.Fragment,null,d.createElement(ye,null),d.createElement(pe,null)),Me.defaultProps={controls:d.createElement(d.Fragment,null,Me.defaultControlsLeft,d.createElement("div",{className:"rp-controls-right"},Me.defaultControlsRight)),style:{}};class Pe extends d.PureComponent{constructor(e,t){super(e,t),this.player=t,this.playback=t.playback,this.start=this.player.script.parseStart(this.props.start),v(this,["pause","play","onPlay","onRateChange","onSeek","onTimeUpdate","onVolumeChange","onDomPlay","onDomPause"])}componentDidMount(){this.playback.on("pause",this.pause),this.playback.on("play",this.onPlay),this.playback.on("ratechange",this.onRateChange),this.playback.on("seek",this.onSeek),this.playback.on("seeking",this.pause),this.playback.on("timeupdate",this.onTimeUpdate),this.playback.on("volumechange",this.onVolumeChange),this.domElement.addEventListener("play",this.onDomPlay),this.domElement.addEventListener("pause",this.onDomPause),this.props.obstructCanPlay&&this.player.obstruct("canplay",p(this.domElement)),this.props.obstructCanPlayThrough&&this.player.obstruct("canplaythrough",m(this.domElement)),this.onVolumeChange();const e=()=>{const e=this.domElement.buffered,t=[];for(let n=0;n<e.length;++n)e.end(n)!==1/0&&t.push([1e3*e.start(n)+this.start,1e3*e.end(n)+this.start]);return t},t=()=>{this.player.updateBuffer(this.domElement,e())};this.player.registerBuffer(this.domElement),t(),this.domElement.addEventListener("progress",t)}componentWillUnmount(){this.playback.off("pause",this.pause),this.playback.off("play",this.onPlay),this.playback.off("ratechange",this.onRateChange),this.playback.off("seek",this.onSeek),this.playback.off("seeking",this.pause),this.playback.off("timeupdate",this.onTimeUpdate),this.playback.off("volumechange",this.onVolumeChange),this.domElement.removeEventListener("pause",this.onDomPause),this.domElement.removeEventListener("play",this.onDomPlay),this.player.unregisterBuffer(this.domElement)}get end(){return this.start+1e3*this.domElement.duration}pause(){this.domElement.ended||(this.domElement.removeEventListener("pause",this.onDomPause),this.domElement.pause(),this.domElement.addEventListener("pause",this.onDomPause))}play(){this.domElement.removeEventListener("play",this.onDomPlay);const e=this.domElement.play();return this.domElement.addEventListener("play",this.onDomPlay),e}onPlay(){this.onTimeUpdate(this.playback.currentTime)}onRateChange(){this.domElement.playbackRate=this.playback.playbackRate}onSeek(e){f(this.start,e,this.end)?(this.domElement.currentTime=(e-this.start)/1e3,!this.domElement.paused||this.playback.paused||this.playback.seeking||this.play().catch(this.playback.pause)):this.domElement.paused||this.pause()}onTimeUpdate(e){if(f(this.start,e,this.end)){if(!this.domElement.paused||this.domElement.ended)return;this.domElement.currentTime=(e-this.start)/1e3,this.play().catch(this.playback.pause)}else this.domElement.paused||this.pause()}onVolumeChange(){this.domElement.volume=this.playback.volume,this.domElement.muted=this.playback.muted}onDomPlay(){this.playback.paused&&(this.playback.off("play",this.onPlay),this.playback.play(),this.playback.on("play",this.onPlay))}onDomPause(){this.playback.seeking||this.playback.paused||this.domElement.ended||(this.playback.off("pause",this.pause),this.playback.pause(),this.playback.on("pause",this.pause))}}function Oe(e){const t=document.createElement("template");return t.innerHTML=e,t.content.cloneNode(!0)}Pe.defaultProps={obstructCanPlay:!1,obstructCanPlayThrough:!1},Pe.contextType=Me.Context;var Se=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class Ne extends Pe{componentDidMount(){super.componentDidMount();for(const e of Array.from(this.domElement.textTracks)){if(!["captions","subtitles"].includes(e.kind))continue;let t=e.mode;e.addEventListener("cuechange",(()=>{if("showing"!==e.mode)return"showing"===t&&(this.playback.captions=[]),void(t=e.mode);t=e.mode;const n=[];for(const t of Array.from(e.activeCues)){const e=t.text.replace(/\n/g,"<br/>");n.push(Oe(e))}this.playback.captions=n}))}}render(){const e=this.props,{start:t,obstructCanPlay:n,obstructCanPlayThrough:r,children:i}=e,s=Se(e,["start","obstructCanPlay","obstructCanPlayThrough","children"]);return d.createElement("audio",Object.assign({preload:"auto",ref:e=>this.domElement=e},s),i)}}class Re extends d.PureComponent{constructor(e){super(e),v(this,["renderContent"]),this.foundIds=new Set}render(){return this.props.hasOwnProperty("map")?d.createElement(Re.Context.Provider,{value:[this.foundIds,this.props.map]},this.renderContent([this.foundIds,this.props.map])):d.createElement(Re.Context.Consumer,null,this.renderContent)}renderContent([e,t]){return H(this.props.children,(n=>{const r={};if(n.props.hasOwnProperty("id")){const{id:i}=n.props;e.add(i),void 0!==t[i]&&Object.assign(r,t[i])}return 0===Object.keys(r).length?n:d.cloneElement(n,r)}))}}Re.Context=d.createContext([]);var je=r(447);class Ae extends je.EventEmitter{constructor(e){super(),this.currentTime=0,this.paused=!0,this.timeline=new DocumentTimeline,this.__animations=[],this.__delays=new WeakMap,this.__captions=[],this.__playbackRate=1,this.__muted=!1,this.__seeking=!1,this.__volume=1,this.duration=e.duration,this.__playingFrom=0,this.__startTime=performance.now(),this.audioContext=new(window.AudioContext||webkitAudioContext),this.audioNode=this.audioContext.createGain(),this.audioNode.connect(this.audioContext.destination),this.setMaxListeners(0),this.__createTimeline(),v(this,["pause","play"]),this.__advance=this.__advance.bind(this),requestAnimationFrame(this.__advance)}get captions(){return this.__captions}set captions(e){this.__captions=e,this.emit("cuechange")}get duration(){return this.__duration}set duration(e){e!==this.__duration&&(this.__duration=e,this.emit("durationchange"))}get muted(){return this.__muted}set muted(e){e!==this.__muted&&(this.__muted=e,this.__muted?this.audioNode.gain.value=0:this.audioNode.gain.setValueAtTime(this.volume,this.audioContext.currentTime),this.emit("volumechange"))}get playbackRate(){return this.__playbackRate}set playbackRate(e){e!==this.__playbackRate&&(this.__playbackRate=e,this.__playingFrom=this.currentTime,this.__startTime=performance.now(),this.emit("ratechange"))}get seeking(){return this.__seeking}set seeking(e){e!==this.__seeking&&(this.__seeking=e,this.__seeking?this.emit("seeking"):this.emit("seeked"))}pause(){this.paused=!0,this.__playingFrom=this.currentTime,this.emit("pause")}play(){this.paused=!1,this.emit("play")}seek(e){e=y(0,e,this.duration),this.currentTime=this.__playingFrom=e,this.__startTime=performance.now(),this.emit("seek",e)}get volume(){return this.__volume}set volume(e){this.muted=!1;const t=this.__volume;this.__volume=y(0,e,1),0===t||0===this.__volume?this.audioNode.gain.setValueAtTime(0,this.audioContext.currentTime):this.audioNode.gain.exponentialRampToValueAtTime(this.__volume,this.audioContext.currentTime+2),this.emit("volumechange")}stop(){this.paused=!0,this.__playingFrom=0,this.emit("stop")}newAnimation(e,t){let n;return r=>{if(null===r)return n.cancel(),void(n=void 0);void 0!==n&&console.warn("Animations should not be reused as they will not cancel properly. Check animations attached to ",r),n=new Animation(new KeyframeEffect(r,e,t),this.timeline),"object"!=typeof t||"forwards"!==t.fill&&"both"!==t.fill||n.persist();const i=n.effect.getTiming().delay;return this.__delays.set(n.effect,i),n.currentTime=(this.currentTime-i)/this.playbackRate,n.startTime=null,n.pause(),0!==i&&n.effect.updateTiming({delay:.1}),this.__animations.push(n),n.addEventListener("cancel",(()=>{this.__animations.splice(this.__animations.indexOf(n),1)})),n}}__advance(e){this.paused||this.__seeking?this.__startTime=e:(this.currentTime=this.__playingFrom+Math.max((e-this.__startTime)*this.__playbackRate,0),this.currentTime>=this.duration&&(this.currentTime=this.duration,this.stop()),this.emit("timeupdate",this.currentTime)),requestAnimationFrame(this.__advance)}__createTimeline(){this.timeline=new DocumentTimeline,this.on("pause",(()=>{for(const e of this.__animations)e.pause()})),this.on("play",(()=>{for(const e of this.__animations)e.startTime=null,e.play(),e.startTime=this.timeline.currentTime+(this.__delays.get(e.effect)-this.currentTime)/this.playbackRate})),this.on("ratechange",(()=>{for(const e of this.__animations)e.playbackRate=this.playbackRate})),this.on("seek",(()=>{for(const e of this.__animations){const t=(this.__delays.get(e.effect)-this.currentTime)/this.playbackRate;this.paused?(e.currentTime=-t,e.pause()):e.startTime=this.timeline.currentTime+t}}))}}Object.defineProperty(Ae.prototype,"hub",{get:function(){return this}});const Fe=Ae.prototype.seek;Ae.prototype.seek=function(e){"string"==typeof e&&(e=B(e)),Fe.call(this,e)};const De=Ae;class Be extends w.EventEmitter{constructor(e){super(),this.setMaxListeners(0),v(this,["back","forward","markerByName","markerNumberOf","parseStart","parseEnd","__updateMarker"]);let t=0;for(const n of e){if(2===n.length){const[,e]=n;n[1]=t,n[2]=t+B(e)}else{const[,e,t]=n;n[1]=B(e),n[2]=B(t)}t=n[2]}this.markers=e,this.markerIndex=0,this.playback=new De({duration:this.markers[this.markers.length-1][2]}),this.playback.on("seek",this.__updateMarker),this.playback.on("timeupdate",this.__updateMarker)}get hub(){return this}get markerName(){return this.markers[this.markerIndex][0]}back(){this.playback.seek(this.markers[Math.max(0,this.markerIndex-1)][1])}forward(){this.playback.seek(this.markers[Math.min(this.markers.length-1,this.markerIndex+1)][1])}markerByName(e){return this.markers[this.markerNumberOf(e)]}markerNumberOf(e){for(let t=0;t<this.markers.length;++t)if(this.markers[t][0]===e)return t;throw new Error(`Marker ${e} does not exist`)}parseStart(e){return"string"==typeof e?e.match(D)?B(e):this.markerByName(e)[1]:e}parseEnd(e){return"string"==typeof e?e.match(D)?B(e):this.markerByName(e)[2]:e}__updateMarker(e){let t;for(let n=0;n<this.markers.length;++n){const[,r,i]=this.markers[n];if(f(r,e,i)){t=n;break}}if(void 0===t&&(t=this.markers.length-1),t!==this.markerIndex){const e=this.markerIndex;this.markerIndex=t,this.emit("markerupdate",e)}}}function Ve(e){"startValue"in e||(e.startValue=0),"endValue"in e||(e.endValue=1),"easing"in e||(e.easing=e=>e);const{startValue:t,endValue:n,startTime:r,duration:i,easing:s}=e;return e=>t+s(y(0,(e-r)/i,1))*(n-t)}function Ue({data:e,start:t,end:n,active:r,inactive:i,compressed:s}){void 0===s&&(s=!1);const o=e.map((e=>e[0]));if(s)for(let l=1;l<o.length;++l)o[l]+=o[l-1];void 0===t&&(t=0),void 0===n&&(n=t+o[o.length-1]);let a=0,c=0,u=!0;return function(s){if(s<t||s>=n)return u?(u=!1,i()):void 0;u=!0,s<a&&(c=0),a=s;let l=Math.min(c,o.length-1);for(;c<o.length&&t+o[c]<s;c++)l=c;const[,h]=e[l];r(h,l)}}function Ie(e){return e?{}:{style:{opacity:0,pointerEvents:"none"}}}function ze(e){return{"data-during":e}}function Ke(e,t){return{"data-from-first":e,"data-from-last":t}}function He(...e){const[t,...n]=e,r=[...t[0]];let i=t[1]+Xe(t[0]);for(const[s,o]of n){const e=s.slice();e[0][0]+=o-i,r.push(...e),i+=Xe(e)}return r}function Xe(e){return e.map((e=>e[0])).reduce(((e,t)=>e+t),0)}var qe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class We extends Pe{render(){const e=this.props,{start:t,children:n,obstructCanPlay:r,obstructCanPlayThrough:i}=e,s=qe(e,["start","children","obstructCanPlay","obstructCanPlayThrough"]);return d.createElement("video",Object.assign({playsInline:!0,preload:"auto",ref:e=>this.domElement=e},s),n)}}const Ye={Captions:ne,FullScreen:pe,PlayPause:me,ScrubberBar:G,Settings:ye,TimeDisplay:ke,Volume:Ce};Object.defineProperty(window,"RactivePlayer",{get(){if(void 0!==window.Liqvid)return window.Liqvid}})})(),i})()}));